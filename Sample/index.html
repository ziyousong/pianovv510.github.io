<!DOCTYPE html>
<head>
<title>Sample</title>
<link rel="stylesheet" href="main.css">

</head>
<body>
<font id="title">Sample</font><p><br>

<div id="content">

	<div id="analog">
		<div class="analogclass">
		<img class="analogsensor" src="img/light.png" />
		<span class="analogvalue" id="lightvalue"></span><br>
		</div>
		<p>
		<div class="analogclass">
		<img class="analogsensor" src="img/temp.png" />
		<span class="analogvalue" id="temperaturevalue">15</span>
		</div>
	</div>
	<div id="rgb">
		<img class="rgbled" src="img/rgb.png" />
		<table style="margin: 0 auto; margin-top: 10px;">
			<tr style="text-align: center;">
				<td><font color="red"><b>Red</b></font></td>
				<td><font color="green"><b>green</b></font></td>
				<td><font color="blue"><b>blue</b></font></td>
			</tr>
			<tr style="text-align: center;">
				<td id="redvalue">0</td>
				<td id="greenvalue">0</td>
				<td id="bluevalue">0</td>
			</tr>
			<tr>
				<td><input Onchange="red(this.value);" type="range" id="rled" value="0" min="0" max="255"></td>
				<td><input Onchange="green(this.value);" type="range" id="gled" value="0" min="0" max="255"></td>
				<td><input Onchange="blue(this.value);" type="range" id="bled" value="0" min="0" max="255"></td>
			</tr>
		</table>
		<span id="showcolor"></span>
	</div>
	
	<p><br>
	<button id="submit" onclick="send()">Start</button><p>
	<button id="submit">Stop</button>
		
</div>

<script>
	
	var i = 0;
	var lightdata;
	var tempdata;
	
	var Rled = document.getElementById("rled");
	var Gled = document.getElementById("gled");
	var Bled = document.getElementById("bled");
	
	function loop() {
		if(cpf){
	
			lightdata = cpf.get("light sensor");
			tempdata = cpf.get("temperature sensor");
				
			document.getElementById("lightvalue").innerHTML = lightdata;
			document.getElementById("temperaturevalue").innerHTML = tempdata;
			
		}
		setTimeout("loop()", 1000);
	}
	loop();
	
	function red(value) {
		document.getElementById("redvalue").innerHTML = value;
		document.getElementById("showcolor").style.backgroundColor = 'rgb(' + value + ',' + Gled.value + ',' + Bled.value + ')';
	}
	
	function green(value) {
		document.getElementById("greenvalue").innerHTML = value;
		document.getElementById("showcolor").style.backgroundColor = 'rgb(' + Rled.value + ',' + value + ',' + Bled.value + ')';
	}
	
	function blue(value) {
		document.getElementById("bluevalue").innerHTML = value;
		document.getElementById("showcolor").style.backgroundColor = 'rgb(' + Rled.value + ',' + Gled.value + ',' + value + ')';
	}
	
	function send() {
		if(cpf){
			lightdata = cpf.get("light sensor");
			tempdata = cpf.get("temperature sensor");
			
			document.getElementById("lightvalue").innerHTML = lightdata;
			document.getElementById("temperaturevalue").innerHTML = tempdata;
			
			cpf.set("rgb led", Rled.value, Gled.value, Bled.value);
		
		}
	}
	
	function setup(){
		if(cpf)
			var ret = cpf.setPinMode('[\"resetPin\"],[\"setPinMode\", \"analog\", 0, \"INPUT\"],[\"setPinMode\", \"analog\", 1,\"INPUT\"],[\"grove_newChainableLED\", 7, 8, 1]'); 
			//document.getElementById("demo").innerHTML += ret + "<br>";
	}
	
</script>
</body>
</html>
