<!DOCTYPE html>
<head>
<title>Remote Control Car</title>

<link rel="stylesheet" type="text/css" href="./css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>
<body>

<center>
<img src="./images/controller.png" id="controller">
<img src="./images/left_right_control.png" id="left_right_control"/>
	<img src="./images/left.png" id="left_control">
	<img src="./images/right.png" id="right_control">
<img src="./images/top_bottom_control.png" id="top_bottom_control"/>
	<img src="./images/top.png" id="top_control">
	<img src="./images/bottom.png" id="bottom_control">
</center>


</body>

<script>
setup();

var going = document.getElementById("top_control");
var back = document.getElementById("bottom_control");
var left = document.getElementById("left_control");
var right = document.getElementById("right_control");

// 前進
going.addEventListener('touchstart', function(event) {
	document.getElementById("top_bottom_control").src= './images/top_event.png';
	cpf.set("d2", 1);
	cpf.set("d4", 1);
});

going.addEventListener('touchend', function(event) {
	document.getElementById("top_bottom_control").src= './images/top_bottom_control.png';
	cpf.set("d2", 0);
	cpf.set("d4", 0);
});

// 後退
back.addEventListener('touchstart', function(event) {
	document.getElementById("top_bottom_control").src= './images/bottom_event.png';
	cpf.set("d3", 1);
	cpf.set("d5", 1);
});

back.addEventListener('touchend', function(event) {
	document.getElementById("top_bottom_control").src= './images/top_bottom_control.png';
	cpf.set("d3", 0);
	cpf.set("d5", 0);
});

// 左轉
left.addEventListener('touchstart', function(event) {
	document.getElementById("left_right_control").src= './images/left_event.png';
	cpf.set("d2", 1);
	cpf.set("d4", 0);
});

left.addEventListener('touchend', function(event) {
	document.getElementById("left_right_control").src= './images/left_right_control.png';
	cpf.set("d2", 0);
	cpf.set("d4", 0);
});

// 右轉
right.addEventListener('touchstart', function(event) {
	document.getElementById("left_right_control").src= './images/right_event.png';
	cpf.set("d2", 0);
	cpf.set("d4", 1);
});

right.addEventListener('touchend', function(event) {
	document.getElementById("left_right_control").src= './images/left_right_control.png';
	cpf.set("d2", 0);
	cpf.set("d4", 0);
});

/*$(document).ready(function(){
	
	 // 左轉
	 $("#left_control").bind( "mouseup touchend", function(e){
		$("#left_right_control").attr("src", "./images/left_right_control.png");
		cpf.set("d2", 0);
		cpf.set("d4", 0);
	 });
	 $("#left_control").bind( "mousedown touchstart", function(e){
		$("#left_right_control").attr("src", "./images/left_event.png");
		cpf.set("d2", 1);
		cpf.set("d4", 0);
	 });
	 
	 // 右轉
	 $("#right_control").bind( "mouseup touchend", function(e){
		$("#left_right_control").attr("src", "./images/left_right_control.png");
		cpf.set("d2", 0);
		cpf.set("d4", 0);
	 });
	 $("#right_control").bind( "mousedown touchstart", function(e){
		$("#left_right_control").attr("src", "./images/right_event.png");
		cpf.set("d2", 0);
		cpf.set("d4", 1);
	 });
	 
	 // 前進
	 $("#top_control").bind( "mouseup touchend", function(e){
		$("#top_bottom_control").attr("src", "./images/top_bottom_control.png");
		cpf.set("d2", 0);
		cpf.set("d4", 0);
		
	 });
	 $("#top_control").bind( "mousedown touchstart", function(e){
		$("#top_bottom_control").attr("src", "./images/top_event.png");
		cpf.set("d2", 1);
		cpf.set("d4", 1);
	 });

	 // 後退
	 $("#bottom_control").bind( "mouseup touchend", function(e){
		$("#top_bottom_control").attr("src", "./images/top_bottom_control.png");
		cpf.set("d3", 0);
		cpf.set("d5", 0);
	 });
	 $("#bottom_control").bind( "mousedown touchstart", function(e){
		$("#top_bottom_control").attr("src", "./images/bottom_event.png");
		cpf.set("d3", 1);
		cpf.set("d5", 1);
	 });
	 
});*/

	// cpf setup
	function setup(){
		if(cpf)
			var ret = cpf.setPinMode('["resetPin"],["setPinMode", "digital", 2, "OUTPUT"],["setPinMode", "digital", 3,"OUTPUT"],["setPinMode", "digital", 4,"OUTPUT"],["setPinMode", "digital", 5,"OUTPUT"]');
			
	}
	
</script>

</html>